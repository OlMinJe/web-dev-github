<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise</title>
</head>
<body>
    <p id="timer"></p>
    <p>
        <button onclick="start()">시작</button>
        <button onclick="stop()">중지</button>
    </p>
    <script>
        function displayer(message) {
            console.log(message);
        }

        /*
        let myPromise = new Promise(function (resolve, reject) {
            let x = 0;
            
            if(x == 0) {
                resolve("ok");
            } else {
                reject("error");
            }
        });

        myPromise.then();

        let resolve = function(value) {
            displayer(message);
        }

        let reject = function(error) {
            displayer(error);
        }
        */

        let myPromise = new Promise(function (resolve, reject) {
            let x = 0;
            
            if(x == 0) {
                resolve("ok");
            } else {
                reject("error");
            }
        }).then(
            value => console.log(value),
            error => alert(error)
        )

        "use strict" // 엄격 모드를 사용해서 헷갈리는 부분이 없도록 함.
        let timer = document.getElementById("timer");
        let timerID;
        let time = prompt("시간을 초 단위로 입력");
        timer.innerHTML = time;

        function start() {
            /*
            itemrID = setInterval(function () {
                timer.innerHTML = --time;
            }, 1000);
            */
            let timerPromise = new Promise(function(start, stop) {
            timerID = setInterval(function() {
                timer.innerHTML = --time;
                if(time == 0) {
                    stop();
                }
            }, 1000);
        });
        }

        function stop() {
            alert("시계가 멈추었습니다.");
            clearInterval(timerID);
        }
    </script>
</body>
</html>